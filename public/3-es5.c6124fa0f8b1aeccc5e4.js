!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{hWAZ:function(t,o,i){"use strict";i.r(o),i.d(o,"ExpensesPageModule",(function(){return j}));var r=i("ofXK"),s=i("3Pt+"),a=i("TEn/"),c=i("PCNd"),u=i("tyNb"),l=i("mrSG"),b=i("Wgqb"),p=i("z0XX"),d=i("fXoL"),g=i("otNS"),f=i("lGQG"),h=i("6c4d"),m=i("b1s6");function v(e,n){1&e&&d.Jb(0,"ion-progress-bar",3)}function x(e,n){1&e&&d.Jb(0,"app-skeleton")}function y(e,n){if(1&e){var t=d.Ob();d.Nb(0,"ion-item-option",9),d.Vb("click",(function(){d.jc(t);var e=d.Xb().$implicit;return d.Xb(2).deleteExpense(e)})),d.Jb(1,"ion-icon",10),d.Mb()}}function k(e,n){if(1&e){var t=d.Ob();d.Nb(0,"ion-item-sliding"),d.Nb(1,"ion-item",5),d.Vb("click",(function(){d.jc(t);var e=n.$implicit;return d.Xb(2).goExpenseDetail(e)})),d.Nb(2,"ion-label"),d.Nb(3,"ion-text"),d.Nb(4,"h3"),d.nc(5),d.Mb(),d.Mb(),d.Nb(6,"p"),d.nc(7),d.Mb(),d.Mb(),d.Jb(8,"ion-icon",6),d.Mb(),d.Nb(9,"ion-item-options",7),d.mc(10,y,2,0,"ion-item-option",8),d.Mb(),d.Mb()}if(2&e){var o=n.$implicit,i=d.Xb(2);d.yb(5),d.pc("",o.concept," "),d.yb(2),d.oc(o.amount),d.yb(3),d.ec("ngIf",i.roleAutorization.canDeleteExpense(i.authSvc.getLoggedUser()))}}function E(e,n){if(1&e&&(d.Nb(0,"ion-list"),d.mc(1,k,11,3,"ion-item-sliding",4),d.Mb()),2&e){var t=d.Xb();d.yb(1),d.ec("ngForOf",t.expenses)}}function w(e,n){if(1&e){var t=d.Ob();d.Nb(0,"ion-button",13),d.Vb("click",(function(){return d.jc(t),d.Xb(2).createExpense()})),d.nc(1,"Cargar Gasto"),d.Mb()}}function N(e,n){if(1&e&&(d.Nb(0,"div",11),d.mc(1,w,2,0,"ion-button",12),d.Mb()),2&e){var t=d.Xb();d.yb(1),d.ec("ngIf",!t.loading)}}var I,C,M,O=[{path:"",component:(I=function(){function t(n,o,i,r,s){e(this,t),this.expensesService=n,this.alertController=o,this.authSvc=i,this.roleAutorization=r,this.modalController=s,this.loading=!1}var o,i,r;return o=t,(i=[{key:"ngOnInit",value:function(){var e=this;this.authSvc.getLoggedUser()?this.getExpenses():this.authSvc.getLoggedUser$().subscribe((function(n){e.getExpenses()}))}},{key:"getExpenses",value:function(){var e=this;this.loading=!0,Object.assign({},this.authSvc.getLoggedUser().roles).hasOwnProperty("admin")?this.expensesService.getExpensesByAdmin(this.authSvc.getLoggedUser().uid).subscribe((function(n){e.expenses=n.map((function(e){return Object.assign({id:e.payload.doc.id},e.payload.doc.data())})),console.log("this.expenses: ",e.expenses),e.loading=!1})):this.expensesService.getExpensesByCobrador(this.authSvc.getLoggedUser().uid).subscribe((function(n){e.expenses=n.map((function(e){return Object.assign({id:e.payload.doc.id},e.payload.doc.data())})),console.log("this.expenses: ",e.expenses),e.loading=!1}))}},{key:"goExpenseDetail",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t,o=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalController.create({component:b.a,componentProps:{expense:e}});case 2:return(t=n.sent).onDidDismiss().then((function(e){e.data.dismissed&&o.getExpenses()})),n.next=6,t.present();case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"createExpense",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:p.a});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"deleteExpense",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t,o=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Eliminar Gasto!",message:"El gasto ser\xe1 eliminado ",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){console.log("Cancelar")}},{text:"Ok",handler:function(){o.expensesService.deleteExpense(e.id).then((function(e){return o.getExpenses()}))}}]});case 2:return t=n.sent,n.next=5,t.present();case 5:case"end":return n.stop()}}),n,this)})))}}])&&n(o.prototype,i),r&&n(o,r),t}(),I.\u0275fac=function(e){return new(e||I)(d.Ib(g.a),d.Ib(a.b),d.Ib(f.a),d.Ib(h.a),d.Ib(a.T))},I.\u0275cmp=d.Cb({type:I,selectors:[["app-expenses"]],decls:9,vars:4,consts:[["type","indeterminate",4,"ngIf"],[4,"ngIf"],["class","ion-text-center",4,"ngIf"],["type","indeterminate"],[4,"ngFor","ngForOf"],[3,"click"],["slot","end","name","chevron-forward-outline"],["side","end"],["color","danger",3,"click",4,"ngIf"],["color","danger",3,"click"],["slot","icon-only","name","trash"],[1,"ion-text-center"],["expand","round",3,"click",4,"ngIf"],["expand","round",3,"click"]],template:function(e,n){1&e&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-title"),d.nc(3,"Gastos"),d.Mb(),d.Mb(),d.Mb(),d.Nb(4,"ion-content"),d.mc(5,v,1,0,"ion-progress-bar",0),d.mc(6,x,1,0,"app-skeleton",1),d.mc(7,E,2,1,"ion-list",1),d.mc(8,N,2,1,"div",2),d.Mb()),2&e&&(d.yb(5),d.ec("ngIf",n.loading),d.yb(1),d.ec("ngIf",n.loading),d.yb(1),d.ec("ngIf",!n.loading&&n.roleAutorization.canReadExpense(n.authSvc.getLoggedUser())),d.yb(1),d.ec("ngIf",!n.loading&&n.roleAutorization.canCreateExpense(n.authSvc.getLoggedUser())))},directives:[a.s,a.Q,a.P,a.p,r.l,a.D,m.a,a.B,r.k,a.z,a.v,a.A,a.O,a.t,a.y,a.x,a.h],styles:[""]}),I)}],S=((M=function n(){e(this,n)}).\u0275mod=d.Gb({type:M}),M.\u0275inj=d.Fb({factory:function(e){return new(e||M)},imports:[[u.j.forChild(O)],u.j]}),M),j=((C=function n(){e(this,n)}).\u0275mod=d.Gb({type:C}),C.\u0275inj=d.Fb({factory:function(e){return new(e||C)},imports:[[r.c,s.e,a.R,S,s.l,c.a]]}),C)}}])}();