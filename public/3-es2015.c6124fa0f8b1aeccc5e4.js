(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{hWAZ:function(e,n,t){"use strict";t.r(n),t.d(n,"ExpensesPageModule",(function(){return C}));var o=t("ofXK"),i=t("3Pt+"),s=t("TEn/"),c=t("PCNd"),r=t("tyNb"),a=t("mrSG"),l=t("Wgqb"),d=t("z0XX"),b=t("fXoL"),p=t("otNS"),g=t("lGQG"),u=t("6c4d"),h=t("b1s6");function m(e,n){1&e&&b.Jb(0,"ion-progress-bar",3)}function f(e,n){1&e&&b.Jb(0,"app-skeleton")}function x(e,n){if(1&e){const e=b.Ob();b.Nb(0,"ion-item-option",9),b.Vb("click",(function(){b.jc(e);const n=b.Xb().$implicit;return b.Xb(2).deleteExpense(n)})),b.Jb(1,"ion-icon",10),b.Mb()}}function y(e,n){if(1&e){const e=b.Ob();b.Nb(0,"ion-item-sliding"),b.Nb(1,"ion-item",5),b.Vb("click",(function(){b.jc(e);const t=n.$implicit;return b.Xb(2).goExpenseDetail(t)})),b.Nb(2,"ion-label"),b.Nb(3,"ion-text"),b.Nb(4,"h3"),b.nc(5),b.Mb(),b.Mb(),b.Nb(6,"p"),b.nc(7),b.Mb(),b.Mb(),b.Jb(8,"ion-icon",6),b.Mb(),b.Nb(9,"ion-item-options",7),b.mc(10,x,2,0,"ion-item-option",8),b.Mb(),b.Mb()}if(2&e){const e=n.$implicit,t=b.Xb(2);b.yb(5),b.pc("",e.concept," "),b.yb(2),b.oc(e.amount),b.yb(3),b.ec("ngIf",t.roleAutorization.canDeleteExpense(t.authSvc.getLoggedUser()))}}function v(e,n){if(1&e&&(b.Nb(0,"ion-list"),b.mc(1,y,11,3,"ion-item-sliding",4),b.Mb()),2&e){const e=b.Xb();b.yb(1),b.ec("ngForOf",e.expenses)}}function E(e,n){if(1&e){const e=b.Ob();b.Nb(0,"ion-button",13),b.Vb("click",(function(){return b.jc(e),b.Xb(2).createExpense()})),b.nc(1,"Cargar Gasto"),b.Mb()}}function N(e,n){if(1&e&&(b.Nb(0,"div",11),b.mc(1,E,2,0,"ion-button",12),b.Mb()),2&e){const e=b.Xb();b.yb(1),b.ec("ngIf",!e.loading)}}const I=[{path:"",component:(()=>{class e{constructor(e,n,t,o,i){this.expensesService=e,this.alertController=n,this.authSvc=t,this.roleAutorization=o,this.modalController=i,this.loading=!1}ngOnInit(){this.authSvc.getLoggedUser()?this.getExpenses():this.authSvc.getLoggedUser$().subscribe(e=>{this.getExpenses()})}getExpenses(){this.loading=!0,Object.assign({},this.authSvc.getLoggedUser().roles).hasOwnProperty("admin")?this.expensesService.getExpensesByAdmin(this.authSvc.getLoggedUser().uid).subscribe(e=>{this.expenses=e.map(e=>Object.assign({id:e.payload.doc.id},e.payload.doc.data())),console.log("this.expenses: ",this.expenses),this.loading=!1}):this.expensesService.getExpensesByCobrador(this.authSvc.getLoggedUser().uid).subscribe(e=>{this.expenses=e.map(e=>Object.assign({id:e.payload.doc.id},e.payload.doc.data())),console.log("this.expenses: ",this.expenses),this.loading=!1})}goExpenseDetail(e){return Object(a.a)(this,void 0,void 0,(function*(){const n=yield this.modalController.create({component:l.a,componentProps:{expense:e}});return n.onDidDismiss().then(e=>{e.data.dismissed&&this.getExpenses()}),yield n.present()}))}createExpense(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:d.a});return yield e.present()}))}deleteExpense(e){return Object(a.a)(this,void 0,void 0,(function*(){const n=yield this.alertController.create({cssClass:"my-custom-class",header:"Eliminar Gasto!",message:"El gasto ser\xe1 eliminado ",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:e=>{console.log("Cancelar")}},{text:"Ok",handler:()=>{this.expensesService.deleteExpense(e.id).then(e=>this.getExpenses())}}]});yield n.present()}))}}return e.\u0275fac=function(n){return new(n||e)(b.Ib(p.a),b.Ib(s.b),b.Ib(g.a),b.Ib(u.a),b.Ib(s.T))},e.\u0275cmp=b.Cb({type:e,selectors:[["app-expenses"]],decls:9,vars:4,consts:[["type","indeterminate",4,"ngIf"],[4,"ngIf"],["class","ion-text-center",4,"ngIf"],["type","indeterminate"],[4,"ngFor","ngForOf"],[3,"click"],["slot","end","name","chevron-forward-outline"],["side","end"],["color","danger",3,"click",4,"ngIf"],["color","danger",3,"click"],["slot","icon-only","name","trash"],[1,"ion-text-center"],["expand","round",3,"click",4,"ngIf"],["expand","round",3,"click"]],template:function(e,n){1&e&&(b.Nb(0,"ion-header"),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-title"),b.nc(3,"Gastos"),b.Mb(),b.Mb(),b.Mb(),b.Nb(4,"ion-content"),b.mc(5,m,1,0,"ion-progress-bar",0),b.mc(6,f,1,0,"app-skeleton",1),b.mc(7,v,2,1,"ion-list",1),b.mc(8,N,2,1,"div",2),b.Mb()),2&e&&(b.yb(5),b.ec("ngIf",n.loading),b.yb(1),b.ec("ngIf",n.loading),b.yb(1),b.ec("ngIf",!n.loading&&n.roleAutorization.canReadExpense(n.authSvc.getLoggedUser())),b.yb(1),b.ec("ngIf",!n.loading&&n.roleAutorization.canCreateExpense(n.authSvc.getLoggedUser())))},directives:[s.s,s.Q,s.P,s.p,o.l,s.D,h.a,s.B,o.k,s.z,s.v,s.A,s.O,s.t,s.y,s.x,s.h],styles:[""]}),e})()}];let M=(()=>{class e{}return e.\u0275mod=b.Gb({type:e}),e.\u0275inj=b.Fb({factory:function(n){return new(n||e)},imports:[[r.j.forChild(I)],r.j]}),e})(),C=(()=>{class e{}return e.\u0275mod=b.Gb({type:e}),e.\u0275inj=b.Fb({factory:function(n){return new(n||e)},imports:[[o.c,i.e,s.R,M,i.l,c.a]]}),e})()}}]);