!function(){function e(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(o,r)}function t(t){return function(){var n=this,o=arguments;return new Promise((function(r,i){var a=t.apply(n,o);function s(t){e(a,r,i,s,c,"next",t)}function c(t){e(a,r,i,s,c,"throw",t)}s(void 0)}))}}function n(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0/6H":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("A36C"),r=n("iWo5"),i=n("qULd"),a=function(e,t){var n,a,s=function(e,o,r){if("undefined"!=typeof document){var i=document.elementFromPoint(e,o);i&&t(i)?i!==n&&(u(),c(i,r)):u()}},c=function(e,t){n=e,a||(a=n);var r=n;Object(o.f)((function(){return r.classList.add("ion-activated")})),t()},u=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n){var t=n;Object(o.f)((function(){return t.classList.remove("ion-activated")})),e&&a!==n&&n.click(),n=void 0}};return Object(r.createGesture)({el:e,gestureName:"buttonActiveDrag",threshold:0,onStart:function(e){return s(e.currentX,e.currentY,i.a)},onMove:function(e){return s(e.currentX,e.currentY,i.b)},onEnd:function(){u(!0),Object(i.e)(),a=void 0}})}},"0Z+d":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var o=n("mrSG"),i=n("3Pt+"),s=n("wd/R"),c=n("IzEk"),u=n("fXoL"),l=n("TEn/"),m=n("96Ms"),b=n("UrgT"),d=n("3LUQ"),f=n("lGQG"),p=n("ofXK");function h(e,t){if(1&e&&(u.Nb(0,"div",25),u.nc(1),u.Mb()),2&e){var n=u.Xb().$implicit;u.yb(1),u.pc(" ",n.message," ")}}function v(e,t){if(1&e&&(u.Lb(0),u.mc(1,h,2,1,"div",24),u.Kb()),2&e){var n=t.$implicit,o=u.Xb();u.yb(1),u.ec("ngIf",o.customerForm.get("name").hasError(n.type)&&(o.customerForm.get("name").dirty||o.customerForm.get("name").touched))}}function g(e,t){if(1&e&&(u.Nb(0,"div",25),u.nc(1),u.Mb()),2&e){var n=u.Xb().$implicit;u.yb(1),u.pc(" ",n.message," ")}}function y(e,t){if(1&e&&(u.Lb(0),u.mc(1,g,2,1,"div",24),u.Kb()),2&e){var n=t.$implicit,o=u.Xb();u.yb(1),u.ec("ngIf",o.customerForm.get("lastName").hasError(n.type)&&(o.customerForm.get("lastName").dirty||o.customerForm.get("lastName").touched))}}function N(e,t){if(1&e&&(u.Nb(0,"div",25),u.nc(1),u.Mb()),2&e){var n=u.Xb().$implicit;u.yb(1),u.pc(" ",n.message," ")}}function M(e,t){if(1&e&&(u.Lb(0),u.mc(1,N,2,1,"div",24),u.Kb()),2&e){var n=t.$implicit,o=u.Xb();u.yb(1),u.ec("ngIf",o.customerForm.get("document").hasError(n.type)&&(o.customerForm.get("document").dirty||o.customerForm.get("document").touched))}}function C(e,t){if(1&e&&(u.Nb(0,"div",25),u.nc(1),u.Mb()),2&e){var n=u.Xb().$implicit;u.yb(1),u.pc(" ",n.message," ")}}function k(e,t){if(1&e&&(u.Lb(0),u.mc(1,C,2,1,"div",24),u.Kb()),2&e){var n=t.$implicit,o=u.Xb();u.yb(1),u.ec("ngIf",o.customerForm.get("phoneNumber").hasError(n.type)&&(o.customerForm.get("phoneNumber").dirty||o.customerForm.get("phoneNumber").touched))}}function x(e,t){if(1&e&&(u.Nb(0,"div",25),u.nc(1),u.Mb()),2&e){var n=u.Xb().$implicit;u.yb(1),u.pc(" ",n.message," ")}}function w(e,t){if(1&e&&(u.Lb(0),u.mc(1,x,2,1,"div",24),u.Kb()),2&e){var n=t.$implicit,o=u.Xb();u.yb(1),u.ec("ngIf",o.customerForm.get("address").hasError(n.type)&&(o.customerForm.get("address").dirty||o.customerForm.get("address").touched))}}function F(e,t){if(1&e&&(u.Nb(0,"ion-select-option",26),u.nc(1),u.Mb()),2&e){var n=t.$implicit;u.fc("value",n.uid),u.yb(1),u.pc("",n.displayName||n.email," ")}}function I(e,t){if(1&e&&(u.Nb(0,"div",25),u.nc(1),u.Mb()),2&e){var n=u.Xb().$implicit;u.yb(1),u.pc(" ",n.message," ")}}function E(e,t){if(1&e&&(u.Lb(0),u.mc(1,I,2,1,"div",24),u.Kb()),2&e){var n=t.$implicit,o=u.Xb();u.yb(1),u.ec("ngIf",o.customerForm.get("reference").hasError(n.type)&&(o.customerForm.get("reference").dirty||o.customerForm.get("reference").touched))}}var S=function(){var e=function(){function e(t,n,o,a,c,u,l){r(this,e),this.formBuilder=t,this.alertController=n,this.eventorService=o,this.customersService=a,this.alertService=c,this.authSvc=u,this.modalCtrl=l,this.validation_messages={name:[{type:"required",message:"El nombre es requerido."}],lastName:[{type:"required",message:"El apellido es requerido."}],document:[{type:"required",message:"La c\xe9dula es requerida."}],phoneNumber:[{type:"required",message:"El celular es requerido."}],address:[{type:"required",message:"La direcci\xf3n es requerida."}],email:[{type:"required",message:"El correo es requerido."},{type:"pattern",message:"Este no es un email v\xe1lido."}],reference:[{type:"required",message:"La referencia es requerida."}]},this.customerForm=this.formBuilder.group({name:new i.b("",i.m.compose([i.m.required])),lastName:new i.b("",i.m.compose([i.m.required])),document:new i.b("",i.m.compose([i.m.required])),phoneNumber:new i.b("",i.m.compose([i.m.required])),address:new i.b("",i.m.compose([i.m.required])),email:new i.b("",i.m.compose([i.m.email,i.m.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),reference:new i.b("",i.m.compose([])),createdAt:new i.b(s().format("ll")),createdBy:null})}return a(e,[{key:"ngOnDestroy",value:function(){window.history.state.modal&&history.back()}},{key:"dismissModal",value:function(){console.log("dismissModal"),this.modalCtrl.dismiss()}},{key:"ngOnInit",value:function(){}},{key:"alertConfirm",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Confirmar!",message:"Registrar <strong>nuevo cliente</strong>",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Ok",handler:function(){console.log("createCustomer: ",e),o.createCustomer(e)}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"createCustomer",value:function(e){var t=this;e.createdBy=this.authSvc.getLoggedUser().uid,this.authSvc.getLoggedUser().createdBy?(e.adminId=this.authSvc.getLoggedUser().createdBy,e.cobradorId=this.authSvc.getLoggedUser().uid):(e.adminId=this.authSvc.getLoggedUser().uid,e.cobradorId=null),this.customersService.getCustomerByDocument(e.document).pipe(Object(c.a)(1)).subscribe((function(n){return Object(o.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("cliente: ",n),!(n.length>0)){t.next=5;break}this.alertService.presentToast("El numero de c\xe9dula ya fue registrado.",2e3,"top","primary"),t.next=7;break;case 5:return t.next=7,this.customersService.createNewCustomer(e).then((function(e){console.log("res: ",e)}));case 7:this.dismissModal();case 8:case"end":return t.stop()}}),t,this)})))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Ib(i.a),u.Ib(l.b),u.Ib(m.a),u.Ib(b.a),u.Ib(d.a),u.Ib(f.a),u.Ib(l.T))},e.\u0275cmp=u.Cb({type:e,selectors:[["app-new-customer"]],hostBindings:function(e,t){1&e&&u.Vb("popstate",(function(e){return t.dismissModal(e)}),!1,u.ic)},decls:65,vars:9,consts:[["slot","end"],["color","primary",3,"click"],["fullscreen",""],[1,"new-customer-page",3,"formGroup","ngSubmit"],[1,"ios","hydrated"],["position","floating","color","primary"],["type","text","formControlName","name"],["size","small","name","person-outline","color","primary","slot","end",1,"ion-align-self-center"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["type","text","formControlName","lastName"],["size","small","name","person-circle-outline","color","primary","slot","end",1,"ion-align-self-center"],["type","number","formControlName","document"],["size","small","name","wallet-outline","color","primary","slot","end",1,"ion-align-self-center"],["type","tel","formControlName","phoneNumber"],["size","small","name","phone-portrait-outline","color","primary","slot","end",1,"ion-align-self-center"],["type","text","formControlName","address"],["size","small","name","map-outline","color","primary","slot","end",1,"ion-align-self-center"],["type","text","formControlName","reference"],["size","small","name","reader-outline","color","primary","slot","end",1,"ion-align-self-center"],["okText","Seleccionar","cancelText","Cancelar"],[3,"value",4,"ngFor","ngForOf"],[1,"ion-text-center"],["expand","round","fill","outline","type","submit",3,"disabled"],["class","error-message ion-padding-start",4,"ngIf"],[1,"error-message","ion-padding-start"],[3,"value"]],template:function(e,t){1&e&&(u.Nb(0,"ion-header"),u.Nb(1,"ion-toolbar"),u.Nb(2,"ion-title"),u.nc(3,"Crear Cliente"),u.Mb(),u.Nb(4,"ion-buttons",0),u.Nb(5,"ion-button",1),u.Vb("click",(function(){return t.dismissModal()})),u.nc(6,"Cerrar"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(7,"ion-content",2),u.Nb(8,"form",3),u.Vb("ngSubmit",(function(){return t.createCustomer(t.customerForm.value)})),u.Nb(9,"ion-list-header",4),u.nc(10," Informaci\xf3n Personal "),u.Mb(),u.Nb(11,"ion-item"),u.Nb(12,"ion-label",5),u.nc(13,"Nombre: "),u.Mb(),u.Jb(14,"ion-input",6),u.Jb(15,"ion-icon",7),u.Mb(),u.Nb(16,"div",8),u.mc(17,v,2,1,"ng-container",9),u.Mb(),u.Nb(18,"ion-item"),u.Nb(19,"ion-label",5),u.nc(20,"Apellido: "),u.Mb(),u.Jb(21,"ion-input",10),u.Jb(22,"ion-icon",11),u.Mb(),u.Nb(23,"div",8),u.mc(24,y,2,1,"ng-container",9),u.Mb(),u.Nb(25,"ion-item"),u.Nb(26,"ion-label",5),u.nc(27,"C\xe9dula: "),u.Mb(),u.Jb(28,"ion-input",12),u.Jb(29,"ion-icon",13),u.Mb(),u.Nb(30,"div",8),u.mc(31,M,2,1,"ng-container",9),u.Mb(),u.Nb(32,"ion-list-header",4),u.nc(33," Datos de Contacto "),u.Mb(),u.Nb(34,"ion-item"),u.Nb(35,"ion-label",5),u.nc(36,"Celular: "),u.Mb(),u.Jb(37,"ion-input",14),u.Jb(38,"ion-icon",15),u.Mb(),u.Nb(39,"div",8),u.mc(40,k,2,1,"ng-container",9),u.Mb(),u.Nb(41,"ion-item"),u.Nb(42,"ion-label",5),u.nc(43,"Direcci\xf3n: "),u.Mb(),u.Jb(44,"ion-input",16),u.Jb(45,"ion-icon",17),u.Mb(),u.Nb(46,"div",8),u.mc(47,w,2,1,"ng-container",9),u.Mb(),u.Nb(48,"ion-item"),u.Nb(49,"ion-label",5),u.nc(50,"Referencia: "),u.Mb(),u.Jb(51,"ion-input",18),u.Jb(52,"ion-icon",19),u.Mb(),u.Nb(53,"ion-list-header",4),u.nc(54," Cobrador "),u.Mb(),u.Nb(55,"ion-item"),u.Nb(56,"ion-label"),u.nc(57,"Seleccionar Cobrador"),u.Mb(),u.Nb(58,"ion-select",20),u.mc(59,F,2,2,"ion-select-option",21),u.Mb(),u.Mb(),u.Nb(60,"div",8),u.mc(61,E,2,1,"ng-container",9),u.Mb(),u.Nb(62,"div",22),u.Nb(63,"ion-button",23),u.nc(64,"Guardar"),u.Mb(),u.Mb(),u.Mb(),u.Mb()),2&e&&(u.yb(8),u.ec("formGroup",t.customerForm),u.yb(9),u.ec("ngForOf",t.validation_messages.name),u.yb(7),u.ec("ngForOf",t.validation_messages.lastName),u.yb(7),u.ec("ngForOf",t.validation_messages.document),u.yb(9),u.ec("ngForOf",t.validation_messages.phoneNumber),u.yb(7),u.ec("ngForOf",t.validation_messages.address),u.yb(12),u.ec("ngForOf",t.cobradores),u.yb(2),u.ec("ngForOf",t.validation_messages.reference),u.yb(2),u.ec("disabled",t.customerForm.invalid))},directives:[l.s,l.Q,l.P,l.i,l.h,l.p,i.n,i.i,i.d,l.C,l.v,l.A,l.u,l.Y,i.h,i.c,l.t,p.k,l.U,l.I,l.X,p.l,l.J],styles:[".new-customer-page[_ngcontent-%COMP%]   .validation-errors[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:14px}"]}),e}()},"6c4d":function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var i=o("fXoL"),s=function(){var e=function(){function e(){r(this,e)}return a(e,[{key:"canReadUser",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canCreateUser",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canEditUser",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canDeleteUser",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canReadCustomer",value:function(e){return this.checkAuthorization(e,["admin","cobrador"])}},{key:"canCreateCustomer",value:function(e){return this.checkAuthorization(e,["admin","cobrador"])}},{key:"canEditCustomer",value:function(e){return this.checkAuthorization(e,["admin","cobrador"])}},{key:"canDeleteCustomer",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canEditCustomerVendor",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canReadExpense",value:function(e){return this.checkAuthorization(e,["admin","cobrador"])}},{key:"canCreateExpense",value:function(e){return this.checkAuthorization(e,["admin","cobrador"])}},{key:"canEditExpense",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canDeleteExpense",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canReadSale",value:function(e){return this.checkAuthorization(e,["admin","cobrador"])}},{key:"canCreateSale",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canEditSale",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canDeleteSale",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canReadAbono",value:function(e){return this.checkAuthorization(e,["admin","cobrador"])}},{key:"canCreateAbono",value:function(e){return this.checkAuthorization(e,["admin","cobrador"])}},{key:"canEditAbono",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"canDeleteAbono",value:function(e){return this.checkAuthorization(e,["admin"])}},{key:"checkAuthorization",value:function(e,t){if(!e)return!1;var o,r=n(t);try{for(r.s();!(o=r.n()).done;){var i=o.value;if(e.roles[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"74mu":function(e,n,o){"use strict";o.d(n,"a",(function(){return i})),o.d(n,"b",(function(){return a})),o.d(n,"c",(function(){return r})),o.d(n,"d",(function(){return c}));var r=function(e,t){return null!==t.closest(e)},i=function(e,t){return"string"==typeof e&&e.length>0?Object.assign((r=!0,(o="ion-color-"+e)in(n={"ion-color":!0})?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n),t):t;var n,o,r},a=function(e){var t={};return function(e){return void 0!==e?(Array.isArray(e)?e:e.split(" ")).filter((function(e){return null!=e})).map((function(e){return e.trim()})).filter((function(e){return""!==e})):[]}(e).forEach((function(e){return t[e]=!0})),t},s=/^[a-z][a-z0-9+\-.]*:/,c=function(){var e=t(regeneratorRuntime.mark((function e(t,n,o,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||"#"===t[0]||s.test(t)){e.next=4;break}if(!(i=document.querySelector("ion-router"))){e.next=4;break}return e.abrupt("return",(null!=n&&n.preventDefault(),i.push(t,o,r)));case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n,o,r){return e.apply(this,arguments)}}()},"96Ms":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("fXoL"),i=function(){var e=function(){function e(){r(this,e),this.events=[]}return a(e,[{key:"emit",value:function(e,t){this.events[e]||(this.events[e]=new o.n),this.events[e].emit(t)}},{key:"getEmitter",value:function(e){return this.events[e]||(this.events[e]=new o.n),this.events[e]}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ARc2:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var o=n("mrSG"),i=n("3Pt+"),s=n("wd/R"),c=n("fXoL"),u=n("TEn/"),l=n("3LUQ"),m=n("ccOi"),b=n("ofXK");function d(e,t){if(1&e&&(c.Nb(0,"div"),c.nc(1),c.Mb()),2&e){var n=c.Xb().$implicit;c.yb(1),c.pc(" ",n.message," ")}}function f(e,t){if(1&e&&(c.Lb(0),c.mc(1,d,2,1,"div",19),c.Kb()),2&e){var n=t.$implicit,o=c.Xb();c.yb(1),c.ec("ngIf",o.saleForm.get("amount").hasError(n.type)&&(o.saleForm.get("amount").dirty||o.saleForm.get("amount").touched))}}function p(e,t){if(1&e&&(c.Nb(0,"div"),c.nc(1),c.Mb()),2&e){var n=c.Xb().$implicit;c.yb(1),c.pc(" ",n.message," ")}}function h(e,t){if(1&e&&(c.Lb(0),c.mc(1,p,2,1,"div",19),c.Kb()),2&e){var n=t.$implicit,o=c.Xb();c.yb(1),c.ec("ngIf",o.saleForm.get("porcentaje").hasError(n.type)&&(o.saleForm.get("porcentaje").dirty||o.saleForm.get("porcentaje").touched))}}function v(e,t){if(1&e&&(c.Nb(0,"div"),c.nc(1),c.Mb()),2&e){var n=c.Xb().$implicit;c.yb(1),c.pc(" ",n.message," ")}}function g(e,t){if(1&e&&(c.Lb(0),c.mc(1,v,2,1,"div",19),c.Kb()),2&e){var n=t.$implicit,o=c.Xb();c.yb(1),c.ec("ngIf",o.saleForm.get("numeroCuotas").hasError(n.type)&&(o.saleForm.get("numeroCuotas").dirty||o.saleForm.get("numeroCuotas").touched))}}var y=function(){var e=function(){function e(t,n,o,a,s){r(this,e),this.formBuilder=t,this.alertController=n,this.alertService=o,this.modalCtrl=a,this.salesService=s,this.validation_messages={amount:[{type:"required",message:"El monto es requerido."}],numeroCuotas:[{type:"required",message:"El n\xfamero de cuotas es requerida."}],porcentaje:[{type:"required",message:"El % de inter\xe9s es requerido."}]},this.saleForm=this.formBuilder.group({amount:new i.b("",i.m.compose([i.m.required])),numeroCuotas:new i.b("",i.m.compose([i.m.required])),porcentaje:new i.b("",i.m.compose([i.m.required])),cuotas:new i.b([],i.m.compose([i.m.required])),montoConInteres:new i.b("",i.m.compose([i.m.required])),montoCuota:new i.b({value:"",disabled:!0},i.m.compose([i.m.required])),estado:new i.b({value:"",disabled:!0},i.m.compose([i.m.required])),createdAt:new i.b({value:"",disabled:!0},i.m.compose([i.m.required])),customerId:new i.b("",i.m.compose([i.m.required])),cuotasPagadas:new i.b("",i.m.compose([i.m.required])),cuotasPendientes:new i.b("",i.m.compose([i.m.required])),intereses:new i.b("",i.m.compose([i.m.required])),updatedAt:new i.b(""),id:new i.b(""),abonos:new i.b(""),saldo:new i.b(""),vencimiento:new i.b({value:"",disabled:!0},i.m.compose([i.m.required]))})}return a(e,[{key:"ngOnDestroy",value:function(){window.history.state.modal&&history.back()}},{key:"dismissModal",value:function(){console.log("dismissModal"),this.modalCtrl.dismiss(this.sale)}},{key:"ngOnInit",value:function(){var e=this;this.saleForm.setValue(this.sale),this.montoCuota=this.saleForm.get("montoCuota").value,this.saleForm.valueChanges.subscribe((function(t){e.saleForm.get("amount")&&e.saleForm.get("numeroCuotas")&&e.saleForm.get("porcentaje")&&e.calcularMontoCuota()}))}},{key:"updateSaleConfirm",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Confirmar!",message:"Actualizar <strong>pr\xe9stamo</strong>",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){console.log("Cancelar")}},{text:"Ok",handler:function(){o.updateSale(e)}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"updateSale",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("sale: ",e),e.updatedAt=s().format("llll"),e.cuotas=this.createCuotas(e.numeroCuotas),e.intereses=e.amount*e.porcentaje/100,e.montoConInteres=e.amount+e.intereses,e.montoCuota=e.montoConInteres/e.numeroCuotas,e.cuotasPagadas=0,e.cuotasPendientes=e.numeroCuotas,e.estado="Active",e.vencimiento=e.cuotas[e.numeroCuotas-1].date,e.cuotasPendientes=e.saldo/e.montoCuota,e.cuotasPagadas=e.numeroCuotas-e.cuotasPendientes,e.saldo=this.calcularSaldoPendiente(e),t.next=15,this.salesService.updateSale(e).then((function(e){n.dismissModal()}));case 15:case"end":return t.stop()}}),t,this)})))}},{key:"calcularSaldoPendiente",value:function(e){var t=e.montoConInteres;return e&&e.abonos&&e.abonos.length>0&&(t=e.montoConInteres-this.calcularAbonos(e.abonos)),t}},{key:"calcularAbonos",value:function(e){return e.reduce((function(e,t){return e+t.monto}),0)}},{key:"createCuotas",value:function(e){var t,n=[],o=e;for(t=1;t<=o;t++)"domingo"!==s(s().add(t,"days").format("YYYY-MM-DD")).format("dddd")?n.push({cuota:n.length+1,date:s().add(t,"days").format("ll"),fechaPago:null}):o+=1;return n}},{key:"calcularMontoCuota",value:function(){var e=this.saleForm.get("amount").value*this.saleForm.get("porcentaje").value/100,t=this.saleForm.get("amount").value+e;this.montoCuota=t/this.saleForm.get("numeroCuotas").value}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Ib(i.a),c.Ib(u.b),c.Ib(l.a),c.Ib(u.T),c.Ib(m.a))},e.\u0275cmp=c.Cb({type:e,selectors:[["app-edit-sale"]],hostBindings:function(e,t){1&e&&c.Vb("popstate",(function(e){return t.dismissModal(e)}),!1,c.ic)},inputs:{sale:"sale"},decls:46,vars:6,consts:[["slot","end"],["color","primary",3,"click"],[1,"sale-detail-page"],[3,"formGroup","ngSubmit"],["lines","inset"],["type","text","formControlName","estado"],["size","small","name","shield-outline","color","primary","slot","end",1,"ion-align-self-center"],["type","number","formControlName","amount"],["size","small","name","cash-outline","color","primary","slot","end",1,"ion-align-self-center"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["type","number","formControlName","porcentaje"],["size","small","name","wallet-outline","color","primary","slot","end",1,"ion-align-self-center"],["type","number","formControlName","numeroCuotas"],["size","small","name","sync-outline","color","primary","slot","end",1,"ion-align-self-center"],["type","text","formControlName","montoCuota",3,"value"],["size","small","name","card-outline","color","primary","slot","end",1,"ion-align-self-center"],[1,"ion-text-center"],["expand","round","type","submit",3,"disabled"],[4,"ngIf"]],template:function(e,t){1&e&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.nc(3,"Editar Pr\xe9stamo"),c.Mb(),c.Nb(4,"ion-buttons",0),c.Nb(5,"ion-button",1),c.Vb("click",(function(){return t.dismissModal()})),c.nc(6,"Cerrar"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(7,"ion-content",2),c.Nb(8,"form",3),c.Vb("ngSubmit",(function(){return t.updateSaleConfirm(t.saleForm.value)})),c.Nb(9,"ion-list-header",4),c.Nb(10,"ion-label"),c.nc(11,"Pr\xe9stamo"),c.Mb(),c.Mb(),c.Nb(12,"ion-item"),c.Nb(13,"ion-label"),c.nc(14,"Estado: "),c.Mb(),c.Jb(15,"ion-input",5),c.Jb(16,"ion-icon",6),c.Mb(),c.Nb(17,"ion-item"),c.Nb(18,"ion-label"),c.nc(19,"Monto: "),c.Mb(),c.Jb(20,"ion-input",7),c.Jb(21,"ion-icon",8),c.Mb(),c.Nb(22,"div",9),c.mc(23,f,2,1,"ng-container",10),c.Mb(),c.Nb(24,"ion-item"),c.Nb(25,"ion-label"),c.nc(26,"% Inter\xe9s: "),c.Mb(),c.Jb(27,"ion-input",11),c.Jb(28,"ion-icon",12),c.Mb(),c.Nb(29,"div",9),c.mc(30,h,2,1,"ng-container",10),c.Mb(),c.Nb(31,"ion-item"),c.Nb(32,"ion-label"),c.nc(33,"N\xfamero de cuotas: "),c.Mb(),c.Jb(34,"ion-input",13),c.Jb(35,"ion-icon",14),c.Mb(),c.Nb(36,"div",9),c.mc(37,g,2,1,"ng-container",10),c.Mb(),c.Nb(38,"ion-item"),c.Nb(39,"ion-label"),c.nc(40,"Monto de la Cuota: "),c.Mb(),c.Jb(41,"ion-input",15),c.Jb(42,"ion-icon",16),c.Mb(),c.Nb(43,"div",17),c.Nb(44,"ion-button",18),c.nc(45,"Actualizar"),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&e&&(c.yb(8),c.ec("formGroup",t.saleForm),c.yb(15),c.ec("ngForOf",t.validation_messages.amount),c.yb(7),c.ec("ngForOf",t.validation_messages.porcentaje),c.yb(7),c.ec("ngForOf",t.validation_messages.numeroCuotas),c.yb(4),c.ec("value",t.montoCuota),c.yb(3),c.ec("disabled",t.saleForm.invalid))},directives:[u.s,u.Q,u.P,u.i,u.h,u.p,i.n,i.i,i.d,u.C,u.A,u.v,u.u,u.Y,i.h,i.c,u.t,u.U,b.k,b.l],styles:[""]}),e}()},PCNd:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var o,i,a=n("ofXK"),s=n("TEn/"),c=n("tyNb"),u=n("fXoL"),l=[],m=((i=function e(){r(this,e)}).\u0275mod=u.Gb({type:i}),i.\u0275inj=u.Fb({factory:function(e){return new(e||i)},imports:[[c.j.forChild(l),a.c],c.j]}),i),b=((o=function e(){r(this,e)}).\u0275mod=u.Gb({type:o}),o.\u0275inj=u.Fb({factory:function(e){return new(e||o)},imports:[[a.c,m,s.R]]}),o)},UrgT:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("fXoL"),i=n("I/3d"),s=function(){var e=function(){function e(t){r(this,e),this.firestore=t}return a(e,[{key:"getCustomerById",value:function(e){return this.firestore.doc("/customers/"+e).valueChanges()}},{key:"getCustomersNew",value:function(){return this.firestore.collection("customers").snapshotChanges()}},{key:"getCustomersByAdmin",value:function(e){return this.firestore.collection("customers",(function(t){return t.where("adminId","==",e)})).snapshotChanges()}},{key:"getCustomersByCobrador",value:function(e){return this.firestore.collection("customers",(function(t){return t.where("cobradorId","==",e)})).snapshotChanges()}},{key:"getCustomerByDocument",value:function(e){return this.firestore.collection("customers",(function(t){return t.where("document","==",e)})).snapshotChanges()}},{key:"createNewCustomer",value:function(e){var t=this.firestore.createId();return this.firestore.collection("customers").doc(t).set(e)}},{key:"updateCustomer",value:function(e){return this.firestore.doc("customers/"+e.id).update(e)}},{key:"deleteCustomer",value:function(e){return this.firestore.doc("customers/"+e).delete()}},{key:"getVendedoresByAdmin",value:function(e){return this.firestore.collection("users",(function(t){return t.where("createdBy","==",e)})).snapshotChanges()}},{key:"getSalesByCustomerId",value:function(e){return this.firestore.collection("sales",(function(t){return t.where("customerId","==",e).where("estado","==","Active")})).snapshotChanges()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Rb(i.a))},e.\u0275prov=o.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Wgqb:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var o=n("3Pt+"),i=n("wd/R"),s=n("fXoL"),c=n("TEn/"),u=n("otNS"),l=n("3LUQ"),m=n("lGQG"),b=n("6c4d"),d=n("ofXK");function f(e,t){if(1&e&&(s.Nb(0,"div",21),s.nc(1),s.Mb()),2&e){var n=s.Xb().$implicit;s.yb(1),s.pc(" ",n.message," ")}}function p(e,t){if(1&e&&(s.Lb(0),s.mc(1,f,2,1,"div",20),s.Kb()),2&e){var n=t.$implicit,o=s.Xb();s.yb(1),s.ec("ngIf",o.expenseForm.get("concept").hasError(n.type)&&(o.expenseForm.get("concept").dirty||o.expenseForm.get("concept").touched))}}function h(e,t){if(1&e&&(s.Nb(0,"div",21),s.nc(1),s.Mb()),2&e){var n=s.Xb().$implicit;s.yb(1),s.pc(" ",n.message," ")}}function v(e,t){if(1&e&&(s.Lb(0),s.mc(1,h,2,1,"div",20),s.Kb()),2&e){var n=t.$implicit,o=s.Xb();s.yb(1),s.ec("ngIf",o.expenseForm.get("amount").hasError(n.type)&&(o.expenseForm.get("amount").dirty||o.expenseForm.get("amount").touched))}}function g(e,t){if(1&e&&(s.Nb(0,"ion-button",22),s.nc(1,"Actualizar"),s.Mb()),2&e){var n=s.Xb();s.ec("disabled",n.expenseForm.invalid)}}var y=function(){var e=function(){function e(t,n,a,s,c,u){r(this,e),this.modalCtrl=t,this.expenseService=n,this.alertService=a,this.authSvc=s,this.roleAutorization=c,this.formBuilder=u,this.validation_messages={concept:[{type:"required",message:"El concepto es requerido."}],amount:[{type:"required",message:"El monto es requerido."}]},this.expenseForm=this.formBuilder.group({concept:new o.b("",o.m.compose([o.m.required])),amount:new o.b("",o.m.compose([o.m.required])),description:new o.b("",o.m.compose([])),createdAt:new o.b(i().format("ll")),updatedAt:new o.b(i().format("llll")),id:new o.b("")})}return a(e,[{key:"ngOnInit",value:function(){this.expenseForm.setValue(this.expense)}},{key:"ngOnDestroy",value:function(){window.history.state.modal&&history.back()}},{key:"dismissModal",value:function(e){this.modalCtrl.dismiss({dismissed:e})}},{key:"updateExpense",value:function(){var e=this;this.expense.updatedAt=i().format("llll"),this.expenseService.updateExpense(this.expenseForm.value).then((function(t){return e.dismissModal(!0)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Ib(c.T),s.Ib(u.a),s.Ib(l.a),s.Ib(m.a),s.Ib(b.a),s.Ib(o.a))},e.\u0275cmp=s.Cb({type:e,selectors:[["app-expense-detail"]],hostBindings:function(e,t){1&e&&s.Vb("popstate",(function(e){return t.dismissModal(e)}),!1,s.ic)},inputs:{expense:"expense"},decls:41,vars:4,consts:[["slot","end"],["color","primary",3,"click"],["fullscreen",""],[1,"new-expense-page",3,"formGroup","ngSubmit"],["formControlName","concept","placeholder","Seleccionar"],["value","Gasolina"],["value","Almuerzo"],["value","Recarga Celular"],["value","Pago de Nomina"],["value","Taller"],["value","Otros"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["position","floating","color","primary"],["type","number","formControlName","amount"],["size","small","name","cash-outline","color","primary","slot","end",1,"ion-align-self-center"],["type","text","formControlName","description"],["size","small","name","reader-outline","color","primary","slot","end",1,"ion-align-self-center"],[1,"ion-text-center"],["fill","outline","expand","round","type","submit",3,"disabled",4,"ngIf"],["class","error-message ion-padding-start",4,"ngIf"],[1,"error-message","ion-padding-start"],["fill","outline","expand","round","type","submit",3,"disabled"]],template:function(e,t){1&e&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar"),s.Nb(2,"ion-title"),s.nc(3,"Detalle del Gasto"),s.Mb(),s.Nb(4,"ion-buttons",0),s.Nb(5,"ion-button",1),s.Vb("click",(function(){return t.dismissModal(!1)})),s.nc(6,"Cerrar"),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(7,"ion-content",2),s.Nb(8,"form",3),s.Vb("ngSubmit",(function(){return t.updateExpense()})),s.Nb(9,"ion-item"),s.Nb(10,"ion-label"),s.nc(11,"Concepto"),s.Mb(),s.Nb(12,"ion-select",4),s.Nb(13,"ion-select-option",5),s.nc(14,"Gasolina"),s.Mb(),s.Nb(15,"ion-select-option",6),s.nc(16,"Almuerzo"),s.Mb(),s.Nb(17,"ion-select-option",7),s.nc(18,"Recarga Celular"),s.Mb(),s.Nb(19,"ion-select-option",8),s.nc(20,"Pago de Nomina"),s.Mb(),s.Nb(21,"ion-select-option",9),s.nc(22,"Taller"),s.Mb(),s.Nb(23,"ion-select-option",10),s.nc(24,"Otros"),s.Mb(),s.Mb(),s.Mb(),s.Nb(25,"div",11),s.mc(26,p,2,1,"ng-container",12),s.Mb(),s.Nb(27,"ion-item"),s.Nb(28,"ion-label",13),s.nc(29,"Monto: "),s.Mb(),s.Jb(30,"ion-input",14),s.Jb(31,"ion-icon",15),s.Mb(),s.Nb(32,"div",11),s.mc(33,v,2,1,"ng-container",12),s.Mb(),s.Nb(34,"ion-item"),s.Nb(35,"ion-label",13),s.nc(36,"Descripci\xf3n: "),s.Mb(),s.Jb(37,"ion-input",16),s.Jb(38,"ion-icon",17),s.Mb(),s.Nb(39,"div",18),s.mc(40,g,2,1,"ion-button",19),s.Mb(),s.Mb(),s.Mb()),2&e&&(s.yb(8),s.ec("formGroup",t.expenseForm),s.yb(18),s.ec("ngForOf",t.validation_messages.concept),s.yb(7),s.ec("ngForOf",t.validation_messages.amount),s.yb(7),s.ec("ngIf",t.roleAutorization.canEditExpense(t.authSvc.getLoggedUser())))},directives:[c.s,c.Q,c.P,c.i,c.h,c.p,o.n,o.i,o.d,c.v,c.A,c.I,c.X,o.h,o.c,c.J,d.k,c.u,c.U,c.t,c.Y,d.l],styles:[""]}),e}()},ZaV5:function(e,n,o){"use strict";o.d(n,"a",(function(){return r})),o.d(n,"b",(function(){return i}));var r=function(){var e=t(regeneratorRuntime.mark((function e(t,n,o,r,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",t.attachViewToDom(n,o,i,r));case 2:if("string"==typeof o||o instanceof HTMLElement){e.next=4;break}throw new Error("framework delegate is missing");case 4:if(a="string"==typeof o?n.ownerDocument&&n.ownerDocument.createElement(o):o,r&&r.forEach((function(e){return a.classList.add(e)})),i&&Object.assign(a,i),n.appendChild(a),e.t0=a.componentOnReady,!e.t0){e.next=12;break}return e.next=12,a.componentOnReady();case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t,n,o,r,i){return e.apply(this,arguments)}}(),i=function(e,t){if(t){if(e)return e.removeViewFromDom(t.parentElement,t);t.remove()}return Promise.resolve()}},b1s6:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("fXoL"),i=n("TEn/"),s=function(){var e=function(){function e(){r(this,e)}return a(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Cb({type:e,selectors:[["app-skeleton"]],decls:65,vars:0,consts:[[1,"skeleton-component"],["animated","",2,"width","20%"],["slot","start"],["animated",""],["animated","",2,"width","50%"],["animated","",2,"width","80%"],["animated","",2,"width","60%"]],template:function(e,t){1&e&&(o.Nb(0,"div",0),o.Nb(1,"ion-list"),o.Nb(2,"ion-list-header"),o.Nb(3,"ion-label"),o.Jb(4,"ion-skeleton-text",1),o.Mb(),o.Mb(),o.Nb(5,"ion-item"),o.Nb(6,"ion-avatar",2),o.Jb(7,"ion-skeleton-text",3),o.Mb(),o.Nb(8,"ion-label"),o.Nb(9,"h3"),o.Jb(10,"ion-skeleton-text",4),o.Mb(),o.Nb(11,"p"),o.Jb(12,"ion-skeleton-text",5),o.Mb(),o.Nb(13,"p"),o.Jb(14,"ion-skeleton-text",6),o.Mb(),o.Mb(),o.Mb(),o.Nb(15,"ion-item"),o.Nb(16,"ion-avatar",2),o.Jb(17,"ion-skeleton-text",3),o.Mb(),o.Nb(18,"ion-label"),o.Nb(19,"h3"),o.Jb(20,"ion-skeleton-text",4),o.Mb(),o.Nb(21,"p"),o.Jb(22,"ion-skeleton-text",5),o.Mb(),o.Nb(23,"p"),o.Jb(24,"ion-skeleton-text",6),o.Mb(),o.Mb(),o.Mb(),o.Nb(25,"ion-item"),o.Nb(26,"ion-avatar",2),o.Jb(27,"ion-skeleton-text",3),o.Mb(),o.Nb(28,"ion-label"),o.Nb(29,"h3"),o.Jb(30,"ion-skeleton-text",4),o.Mb(),o.Nb(31,"p"),o.Jb(32,"ion-skeleton-text",5),o.Mb(),o.Nb(33,"p"),o.Jb(34,"ion-skeleton-text",6),o.Mb(),o.Mb(),o.Mb(),o.Nb(35,"ion-item"),o.Nb(36,"ion-avatar",2),o.Jb(37,"ion-skeleton-text",3),o.Mb(),o.Nb(38,"ion-label"),o.Nb(39,"h3"),o.Jb(40,"ion-skeleton-text",4),o.Mb(),o.Nb(41,"p"),o.Jb(42,"ion-skeleton-text",5),o.Mb(),o.Nb(43,"p"),o.Jb(44,"ion-skeleton-text",6),o.Mb(),o.Mb(),o.Mb(),o.Nb(45,"ion-item"),o.Nb(46,"ion-avatar",2),o.Jb(47,"ion-skeleton-text",3),o.Mb(),o.Nb(48,"ion-label"),o.Nb(49,"h3"),o.Jb(50,"ion-skeleton-text",4),o.Mb(),o.Nb(51,"p"),o.Jb(52,"ion-skeleton-text",5),o.Mb(),o.Nb(53,"p"),o.Jb(54,"ion-skeleton-text",6),o.Mb(),o.Mb(),o.Mb(),o.Nb(55,"ion-item"),o.Nb(56,"ion-avatar",2),o.Jb(57,"ion-skeleton-text",3),o.Mb(),o.Nb(58,"ion-label"),o.Nb(59,"h3"),o.Jb(60,"ion-skeleton-text",4),o.Mb(),o.Nb(61,"p"),o.Jb(62,"ion-skeleton-text",5),o.Mb(),o.Nb(63,"p"),o.Jb(64,"ion-skeleton-text",6),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb())},directives:[i.B,i.C,i.A,i.K,i.v,i.d],styles:[".skeleton-component[_ngcontent-%COMP%]   .custom-skeleton[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{line-height:13px}.skeleton-component[_ngcontent-%COMP%]   .custom-skeleton[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:last-child{margin-bottom:5px}"]}),e}()},ccOi:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("fXoL"),i=n("I/3d"),s=function(){var e=function(){function e(t){r(this,e),this.firestore=t}return a(e,[{key:"getSales",value:function(){return this.firestore.collection("sales").snapshotChanges()}},{key:"getSaleById",value:function(e){return this.firestore.doc("/sales/"+e).valueChanges()}},{key:"getSalesByCustomerId",value:function(e){return this.firestore.collection("sales",(function(t){return t.where("customerId","==",e)})).snapshotChanges()}},{key:"createNewSale",value:function(e){console.log("createNewSale",e);var t=this.firestore.createId();return this.firestore.collection("sales").doc(t).set(e)}},{key:"updateSale",value:function(e){return this.firestore.doc("sales/"+e.id).update(e)}},{key:"deleteSale",value:function(e){return this.firestore.doc("sales/"+e).delete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Rb(i.a))},e.\u0275prov=o.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},h3R7:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={bubbles:{dur:1e3,circles:9,fn:function(e,t,n){var o=e*t/n-e+"ms",r=2*Math.PI*t/n;return{r:5,style:{top:9*Math.sin(r)+"px",left:9*Math.cos(r)+"px","animation-delay":o}}}},circles:{dur:1e3,circles:8,fn:function(e,t,n){var o=t/n,r=e*o-e+"ms",i=2*Math.PI*o;return{r:5,style:{top:9*Math.sin(i)+"px",left:9*Math.cos(i)+"px","animation-delay":r}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:function(){return{r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}}}},crescent:{dur:750,circles:1,fn:function(){return{r:26,style:{}}}},dots:{dur:750,circles:3,fn:function(e,t){return{r:6,style:{left:9-9*t+"px","animation-delay":-110*t+"ms"}}}},lines:{dur:1e3,lines:12,fn:function(e,t,n){return{y1:17,y2:29,style:{transform:"rotate(".concat(30*t+(t<6?180:-180),"deg)"),"animation-delay":e*t/n-e+"ms"}}}},"lines-small":{dur:1e3,lines:12,fn:function(e,t,n){return{y1:12,y2:20,style:{transform:"rotate(".concat(30*t+(t<6?180:-180),"deg)"),"animation-delay":e*t/n-e+"ms"}}}}}},otNS:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("fXoL"),i=n("I/3d"),s=function(){var e=function(){function e(t){r(this,e),this.firestore=t}return a(e,[{key:"getExpensesNew",value:function(){return this.firestore.collection("expenses").snapshotChanges()}},{key:"getExpensesByAdmin",value:function(e){return this.firestore.collection("expenses",(function(t){return t.where("adminId","==",e)})).snapshotChanges()}},{key:"getExpensesByCobrador",value:function(e){return this.firestore.collection("expenses",(function(t){return t.where("createdBy","==",e)})).snapshotChanges()}},{key:"createNewExpense",value:function(e){var t=this.firestore.createId();return this.firestore.collection("expenses").doc(t).set(e)}},{key:"updateExpense",value:function(e){return this.firestore.doc("expenses/"+e.id).update(e)}},{key:"deleteExpense",value:function(e){return this.firestore.doc("expenses/"+e).delete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Rb(i.a))},e.\u0275prov=o.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},qULd:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return s}));var o={getEngine:function(){var e=window;return e.TapticEngine||e.Capacitor&&e.Capacitor.isPluginAvailable("Haptics")&&e.Capacitor.Plugins.Haptics},available:function(){return!!this.getEngine()},isCordova:function(){return!!window.TapticEngine},isCapacitor:function(){return!!window.Capacitor},impact:function(e){var t=this.getEngine();if(t){var n=this.isCapacitor()?e.style.toUpperCase():e.style;t.impact({style:n})}},notification:function(e){var t=this.getEngine();if(t){var n=this.isCapacitor()?e.style.toUpperCase():e.style;t.notification({style:n})}},selection:function(){this.impact({style:"light"})},selectionStart:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionStart():e.gestureSelectionStart())},selectionChanged:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionChanged():e.gestureSelectionChanged())},selectionEnd:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionEnd():e.gestureSelectionEnd())}},r=function(){o.selection()},i=function(){o.selectionStart()},a=function(){o.selectionChanged()},s=function(){o.selectionEnd()},c=function(e){o.impact(e)}},z0XX:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var o=n("mrSG"),i=n("3Pt+"),s=n("wd/R"),c=n("fXoL"),u=n("TEn/"),l=n("96Ms"),m=n("otNS"),b=n("3LUQ"),d=n("lGQG"),f=n("ofXK");function p(e,t){if(1&e&&(c.Nb(0,"div",22),c.nc(1),c.Mb()),2&e){var n=c.Xb().$implicit;c.yb(1),c.pc(" ",n.message," ")}}function h(e,t){if(1&e&&(c.Lb(0),c.mc(1,p,2,1,"div",21),c.Kb()),2&e){var n=t.$implicit,o=c.Xb();c.yb(1),c.ec("ngIf",o.expenseForm.get("concept").hasError(n.type)&&(o.expenseForm.get("concept").dirty||o.expenseForm.get("concept").touched))}}function v(e,t){if(1&e&&(c.Nb(0,"div",22),c.nc(1),c.Mb()),2&e){var n=c.Xb().$implicit;c.yb(1),c.pc(" ",n.message," ")}}function g(e,t){if(1&e&&(c.Lb(0),c.mc(1,v,2,1,"div",21),c.Kb()),2&e){var n=t.$implicit,o=c.Xb();c.yb(1),c.ec("ngIf",o.expenseForm.get("amount").hasError(n.type)&&(o.expenseForm.get("amount").dirty||o.expenseForm.get("amount").touched))}}var y=function(){var e=function(){function e(t,n,o,a,c,u,l){r(this,e),this.formBuilder=t,this.alertController=n,this.eventorService=o,this.expensesService=a,this.alertService=c,this.authSvc=u,this.modalCtrl=l,this.validation_messages={concept:[{type:"required",message:"El concepto es requerido."}],amount:[{type:"required",message:"El monto es requerido."}]},this.expenseForm=this.formBuilder.group({concept:new i.b("",i.m.compose([i.m.required])),amount:new i.b("",i.m.compose([i.m.required])),description:new i.b("",i.m.compose([])),createdAt:new i.b(s().format("ll")),updatedAt:new i.b(s().format("llll"))})}return a(e,[{key:"ngOnDestroy",value:function(){window.history.state.modal&&history.back()}},{key:"dismissModal",value:function(){console.log("dismissModal"),this.modalCtrl.dismiss()}},{key:"ngOnInit",value:function(){}},{key:"alertConfirm",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Confirmar!",message:"Registrar <strong>nuevo gasto</strong>",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Ok",handler:function(){console.log("createGasto: ",e),o.createExpense(e)}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"createExpense",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("expense: ",e),e.createdBy=this.authSvc.getLoggedUser().uid,e.adminId=this.authSvc.getLoggedUser().createdBy?this.authSvc.getLoggedUser().createdBy:this.authSvc.getLoggedUser().uid,t.next=5,this.expensesService.createNewExpense(e).then((function(e){console.log("res: ",e)}));case 5:this.dismissModal();case 6:case"end":return t.stop()}}),t,this)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Ib(i.a),c.Ib(u.b),c.Ib(l.a),c.Ib(m.a),c.Ib(b.a),c.Ib(d.a),c.Ib(u.T))},e.\u0275cmp=c.Cb({type:e,selectors:[["app-new-expense"]],hostBindings:function(e,t){1&e&&c.Vb("popstate",(function(e){return t.dismissModal(e)}),!1,c.ic)},decls:44,vars:4,consts:[["slot","end"],["color","primary",3,"click"],["fullscreen",""],[1,"new-expense-page",3,"formGroup","ngSubmit"],[1,"ios","hydrated"],["formControlName","concept","placeholder","Seleccionar"],["value","Gasolina"],["value","Almuerzo"],["value","Recarga Celular"],["value","Pago de Nomina"],["value","Taller"],["value","Otros"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["position","floating","color","primary"],["type","number","formControlName","amount"],["size","small","name","cash-outline","color","primary","slot","end",1,"ion-align-self-center"],["type","text","formControlName","description"],["size","small","name","reader-outline","color","primary","slot","end",1,"ion-align-self-center"],[1,"ion-text-center"],["fill","outline","expand","round","type","submit",3,"disabled"],["class","error-message ion-padding-start",4,"ngIf"],[1,"error-message","ion-padding-start"]],template:function(e,t){1&e&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.nc(3,"Cargar Gasto"),c.Mb(),c.Nb(4,"ion-buttons",0),c.Nb(5,"ion-button",1),c.Vb("click",(function(){return t.dismissModal()})),c.nc(6,"Cerrar"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(7,"ion-content",2),c.Nb(8,"form",3),c.Vb("ngSubmit",(function(){return t.createExpense(t.expenseForm.value)})),c.Nb(9,"ion-list-header",4),c.nc(10," Informaci\xf3n del Gasto "),c.Mb(),c.Nb(11,"ion-item"),c.Nb(12,"ion-label"),c.nc(13,"Concepto"),c.Mb(),c.Nb(14,"ion-select",5),c.Nb(15,"ion-select-option",6),c.nc(16,"Gasolina"),c.Mb(),c.Nb(17,"ion-select-option",7),c.nc(18,"Almuerzo"),c.Mb(),c.Nb(19,"ion-select-option",8),c.nc(20,"Recarga Celular"),c.Mb(),c.Nb(21,"ion-select-option",9),c.nc(22,"Pago de Nomina"),c.Mb(),c.Nb(23,"ion-select-option",10),c.nc(24,"Taller"),c.Mb(),c.Nb(25,"ion-select-option",11),c.nc(26,"Otros"),c.Mb(),c.Mb(),c.Mb(),c.Nb(27,"div",12),c.mc(28,h,2,1,"ng-container",13),c.Mb(),c.Nb(29,"ion-item"),c.Nb(30,"ion-label",14),c.nc(31,"Monto: "),c.Mb(),c.Jb(32,"ion-input",15),c.Jb(33,"ion-icon",16),c.Mb(),c.Nb(34,"div",12),c.mc(35,g,2,1,"ng-container",13),c.Mb(),c.Nb(36,"ion-item"),c.Nb(37,"ion-label",14),c.nc(38,"Descripci\xf3n: "),c.Mb(),c.Jb(39,"ion-input",17),c.Jb(40,"ion-icon",18),c.Mb(),c.Nb(41,"div",19),c.Nb(42,"ion-button",20),c.nc(43,"Guardar"),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&e&&(c.yb(8),c.ec("formGroup",t.expenseForm),c.yb(20),c.ec("ngForOf",t.validation_messages.concept),c.yb(7),c.ec("ngForOf",t.validation_messages.amount),c.yb(7),c.ec("disabled",t.expenseForm.invalid))},directives:[u.s,u.Q,u.P,u.i,u.h,u.p,i.n,i.i,i.d,u.C,u.v,u.A,u.I,u.X,i.h,i.c,u.J,f.k,u.u,u.U,u.t,u.Y,f.l],styles:[""]}),e}()}}])}();